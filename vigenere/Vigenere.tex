
\section{Vigenere}
\subsection{Opdracht}
De eerste ciphertext was versleuteld met een Vigen\`ere cipher gevolgd door een enkele kolomtranspositie. Bij het ontcijferen moesten we dus eerst de kolomtranspositie ongedaan maken om een ciphertekst te bekomen die enkel met Vigen\`ere versleuteld was. 

\subsection{Ongedaan maken van de kolomtranspositie}
We zochten een manier om snel te checken of een ciphertekst met Vigen\`ere versleuteld was, zodat we de kolomtranspositie konden bruteforcen in een haalbare tijd. Hiervoor vonden we de "index of coincidence" (IC). Deze wordt als volgt berekend: $IC = \frac{\sum_{i=1}^{c}n_i(n_i -1)}{N(N-1)/c}$ met $n_i$ de frequenties van de $c$ verschillende letters in een tekst lengte $N$. In essentie is dit een frequentietabel samengevat in 1 waarde. Hoe groter de IC, hoe groter de kans dat twee willekeurig gekozen letters in een plaintext dezelfde zijn, met IC = 1 voor een random tekst waarbij elke letter evenveel voorkomt. Voor een Engelse tekst ligt de IC rond de 1.73. Merk op dat bij deze waarde geen rekening gehouden wordt met welke frequentie bij welke letter hoort. Dit betekent dat een plaintext na een monoalfabetische substitutie zijn IC behoudt. Bij een Vigen\`ere ciphertekst met sleutellengte n wordt op elke letter dezelfde monoalfabetische substitutie toegepast als op elke letter er op $kn$ posities vandaan ($k$ geheel). Als we een sleutellengte gokken, kunnen we de tekst verdelen in verzamelingen letters die met dezelfde substitutie versleuteld zouden zijn. Indien de gegokte lengte correct is, moet (indien de ciphertekst lang genoeg was) elke verzameling een redelijk hoge IC hebben, en moeten deze waarden redelijk dicht bij elkaar liggen. Indien de gegokte lengte fout is, zijn de letters in een verzameling niet met dezelfde monoalfabetische substitutie versleuteld (tenzij de gegokte lengte een veelvoud van de correcte is) en lijkt dit eerder een willekeurige verzameling letters, wat een IC dichter bij 1 zal opleveren. \\
Voor onze ciphertekst konden we dus alle mogelijke kolomtransposities ongedaan maken tot een bepaald aantal kolommen om dan te controleren of een mogelijke Vigen\`ere sleutellengte een hoge IC opleverde. Voor een ciphertext waarop een enkele kolomtranspositie toegepast is met $k \in [1,n]$ kolommen, zijn $\sum_{k=1}^{n}k!$ transposities mogelijk. Dit wordt al snel onmogelijk om in een haalbare tijd uit te rekenen, maar gelukkig is het aantal kolommen doorgaans klein. \\
Het ongedaan maken van de transposities gebeurt voor elke mogelijke permutatie van k kolommen als volgt: de ciphertekst lengte $l$ bestaat uit opeenvolgend de letters uit kolommen 1 t.e.m. $k$. In elke kolom komen minstens $\lfloor\frac{l}{k}\rfloor$ voor. In de eerste $l\%k$ kolommen (in de volgorde bepaald door het codewoord voor de kolomtranspositie = gepermuteerde kolommen) komt nog 1 extra letter voor, zodat alle kolommen samen uiteindelijk $l$ letters bevatten. We kunnen de kolommen makkelijk opvullen door gewoon de ciphertekst te overlopen en 1 voor 1 de kolommen op te vullen. Daarna overlopen we de kolommen round-robin in gepermuteerde volgorde en halen we telkens de eerstvolgende letter uit de kolom. In deze volgorde vormen de letters de ciphertekst voor de kolomtranspositie. Op elk van deze cipherteksten voeren we dan, voor elke mogelijke sleutellengte $l$ tot een bepaalde waarde, de volgende Vigen\`eretest uit: we verdelen de ciphertekst in $l$ groepen door de letters 1 voor 1 round-robin over de groepen te verdelen. Elk van deze groepen zou dan door dezelfde monoalfabetische substitutie versleuteld zijn. We berekenen de IC van elke groep en dan het gemiddelde ervan. Indien dit gemiddelde boven een vooraf ingestelde waarde komt, is dit waarschijnlijk de correctie sleutellengte (of een veelvoud ervan). \\ \\ Bij het toepassen van dit principe bij de gegeven ciphertekst, moesten we eerst wat spelen met de variabelen (maximale keylengtes voor Vigen\`ere en kolomtranspositie en minimale IC), maar uiteindelijk vonden we (met een runtime van slechts een viertal seconden) zes kolomtransposities van zes kolommen waarbij Vigen\`ere met sleutellengte 8 een IC van ongeveer 2.15 opleverde. Na vergelijken met wat andere zelf berekende IC's van Nederlandstalige teksten, waren we hier al redelijk zeker dat deze plaintekst Nederlands was. 

\subsection{Vigenere oplossen}
Daarna berekenden we bij elk van de zes mogelijke transposities voor elk van de 8 groepen letters de meest voorkomende letter. Aannemend dat dit de E was (in het Nederlands erg waarschijnlijk) konden we meteen de monoalfabetische substitutie ongedaan maken op elke groep. Door de volgorde van de letters te reconstrueren, bekwamen we bij een van de zes transposities de volgende plaintekst, een fragment uit "Erik of het Klein Insectenboek" door Godfried Bomans.


